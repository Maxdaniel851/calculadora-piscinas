<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora Profesional de Piscinas - Sistema Aseglass</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #4AC8E8 0%, #2B9BC7 50%, #1B5F7A 100%);
            min-height: 100vh;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }
        
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 80%, rgba(255,255,255,0.15) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255,255,255,0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(255,255,255,0.08) 0%, transparent 40%);
            pointer-events: none;
            z-index: 0;
            animation: backgroundMove 20s ease-in-out infinite;
        }
        
        body::after {
            content: '';
            position: fixed;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="waves" width="100" height="100" patternUnits="userSpaceOnUse"><path d="M0,50 Q25,30 50,50 T100,50" stroke="white" stroke-width="0.5" fill="none" opacity="0.1"/><path d="M0,60 Q25,40 50,60 T100,60" stroke="white" stroke-width="0.3" fill="none" opacity="0.08"/></pattern></defs><rect width="100" height="100" fill="url(%23waves)"/></svg>');
            animation: waveFloat 25s linear infinite;
            pointer-events: none;
            z-index: 0;
        }
        
        @keyframes backgroundMove {
            0%, 100% { 
                background: 
                    radial-gradient(circle at 20% 80%, rgba(255,255,255,0.15) 0%, transparent 50%),
                    radial-gradient(circle at 80% 20%, rgba(255,255,255,0.1) 0%, transparent 50%),
                    radial-gradient(circle at 40% 40%, rgba(255,255,255,0.08) 0%, transparent 40%);
            }
            25% { 
                background: 
                    radial-gradient(circle at 80% 20%, rgba(255,255,255,0.15) 0%, transparent 50%),
                    radial-gradient(circle at 20% 80%, rgba(255,255,255,0.1) 0%, transparent 50%),
                    radial-gradient(circle at 60% 60%, rgba(255,255,255,0.08) 0%, transparent 40%);
            }
            50% { 
                background: 
                    radial-gradient(circle at 60% 20%, rgba(255,255,255,0.15) 0%, transparent 50%),
                    radial-gradient(circle at 20% 60%, rgba(255,255,255,0.1) 0%, transparent 50%),
                    radial-gradient(circle at 80% 80%, rgba(255,255,255,0.08) 0%, transparent 40%);
            }
            75% { 
                background: 
                    radial-gradient(circle at 40% 80%, rgba(255,255,255,0.15) 0%, transparent 50%),
                    radial-gradient(circle at 80% 40%, rgba(255,255,255,0.1) 0%, transparent 50%),
                    radial-gradient(circle at 20% 20%, rgba(255,255,255,0.08) 0%, transparent 40%);
            }
        }
        
        @keyframes waveFloat {
            0% { transform: translate(0, 0) rotate(0deg); }
            25% { transform: translate(-5px, -10px) rotate(1deg); }
            50% { transform: translate(10px, 5px) rotate(-1deg); }
            75% { transform: translate(-10px, 10px) rotate(0.5deg); }
            100% { transform: translate(0, 0) rotate(0deg); }
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 25px;
            box-shadow: 
                0 25px 50px rgba(27, 95, 122, 0.3),
                0 0 0 1px rgba(255, 255, 255, 0.2);
            overflow: hidden;
            position: relative;
            z-index: 1;
        }
        
        .header {
            background: linear-gradient(135deg, #4AC8E8 0%, #2B9BC7 100%);
            color: white;
            padding: 40px 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="white" opacity="0.1"/><circle cx="75" cy="75" r="1" fill="white" opacity="0.1"/><circle cx="50" cy="10" r="1" fill="white" opacity="0.1"/><circle cx="20" cy="60" r="1" fill="white" opacity="0.1"/><circle cx="80" cy="40" r="1" fill="white" opacity="0.1"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
            animation: float 20s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            33% { transform: translate(10px, -10px) rotate(1deg); }
            66% { transform: translate(-10px, 10px) rotate(-1deg); }
        }
        
        .header h1 {
            font-size: 3em;
            margin-bottom: 10px;
            font-weight: 800;
            position: relative;
            z-index: 2;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .header p {
            font-size: 1.3em;
            opacity: 0.95;
            position: relative;
            z-index: 2;
            font-weight: 300;
        }
        
        .tipo-btn {
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            font-size: 1.1em;
            font-weight: 700;
            text-transform: none;
            letter-spacing: 0.5px;
        }
        
        .tipo-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(74, 200, 232, 0.2), transparent);
            transition: left 0.6s;
        }
        
        .tipo-btn:hover {
            background: rgba(74, 200, 232, 0.3) !important;
            border-color: rgba(74, 200, 232, 0.7) !important;
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 8px 25px rgba(74, 200, 232, 0.2);
        }
        
        .tipo-btn:hover::before {
            left: 100%;
        }
        
        .tipo-btn.active {
            background: linear-gradient(135deg, rgba(74, 200, 232, 0.4), rgba(43, 155, 199, 0.3)) !important;
            border-color: #4AC8E8 !important;
            box-shadow: 
                0 0 30px rgba(74, 200, 232, 0.4),
                0 5px 15px rgba(0,0,0,0.1);
            transform: translateY(-2px);
            animation: activeGlow 2s ease-in-out infinite alternate;
        }
        
        .tipo-btn:active {
            transform: translateY(0) scale(0.98);
        }
        
        .marca-btn {
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            font-size: 1.1em;
            font-weight: 700;
            text-transform: none;
            letter-spacing: 0.5px;
        }
        
        .bomba-btn {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }
        
        .bomba-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(74, 200, 232, 0.2), transparent);
            transition: left 0.6s;
        }
        
        .bomba-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(74, 200, 232, 0.2);
        }
        
        .bomba-btn:hover::before {
            left: 100%;
        }
        
        .bomba-btn.active {
            background: rgba(74, 200, 232, 0.25) !important;
            border-color: #4AC8E8 !important;
            box-shadow: 0 0 15px rgba(74, 200, 232, 0.3);
        }
        
        .marca-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.6s;
        }
        
        .marca-btn:hover {
            background: rgba(255,255,255,0.3) !important;
            border-color: rgba(255,255,255,0.7) !important;
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        
        .marca-btn:hover::before {
            left: 100%;
        }
        
        .marca-btn.active {
            background: linear-gradient(135deg, rgba(74, 200, 232, 0.4), rgba(43, 155, 199, 0.3)) !important;
            border-color: #4AC8E8 !important;
            box-shadow: 
                0 0 30px rgba(74, 200, 232, 0.4),
                0 5px 15px rgba(0,0,0,0.1);
            transform: translateY(-2px);
            animation: activeGlow 2s ease-in-out infinite alternate;
        }
        
        .marca-btn:active {
            transform: translateY(0) scale(0.98);
        }
        
        @keyframes activeGlow {
            0% { 
                box-shadow: 
                    0 0 30px rgba(74, 200, 232, 0.4),
                    0 5px 15px rgba(0,0,0,0.1);
            }
            100% { 
                box-shadow: 
                    0 0 40px rgba(74, 200, 232, 0.6),
                    0 8px 20px rgba(0,0,0,0.15);
            }
        }
        
        .main-content {
            display: grid;
            grid-template-columns: 450px 1fr;
            gap: 0;
            min-height: 700px;
        }
        
        .input-section {
            padding: 40px 35px;
            background: linear-gradient(180deg, #f8fbfd 0%, #f0f8fb 100%);
            border-right: 1px solid rgba(74, 200, 232, 0.2);
            position: relative;
        }
        
        .input-section::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 3px;
            height: 100%;
            background: linear-gradient(180deg, #4AC8E8, #2B9BC7);
        }
        
        .results-section {
            padding: 40px 35px;
            background: white;
            overflow-y: auto;
        }
        
        .form-group {
            margin-bottom: 30px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 12px;
            font-weight: 700;
            color: #1B5F7A;
            font-size: 1.15em;
            letter-spacing: 0.5px;
        }
        
        .input-row {
            display: flex;
            gap: 15px;
            align-items: center;
        }
        
        input, select {
            width: 100%;
            padding: 18px 20px;
            border: 2px solid rgba(74, 200, 232, 0.3);
            border-radius: 15px;
            font-size: 1.1em;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            background: white;
            color: #1B5F7A;
            font-weight: 500;
        }
        
        input:focus, select:focus {
            outline: none;
            border-color: #4AC8E8;
            box-shadow: 0 0 0 4px rgba(74, 200, 232, 0.15);
            transform: translateY(-2px);
        }
        
        input:hover, select:hover {
            border-color: #2B9BC7;
        }
        
        .shape-selector {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-top: 15px;
        }
        
        .shape-option {
            padding: 30px 20px;
            border: 2px solid rgba(74, 200, 232, 0.3);
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            background: white;
            position: relative;
            overflow: hidden;
            min-height: 120px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        
        .shape-option::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(74, 200, 232, 0.1), transparent);
            transition: left 0.5s;
        }
        
        .shape-option:hover::before {
            left: 100%;
        }
        
        .shape-option:hover {
            border-color: #4AC8E8;
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(74, 200, 232, 0.2);
        }
        
        .shape-option.active {
            border-color: #4AC8E8;
            background: linear-gradient(135deg, #4AC8E8 0%, #2B9BC7 100%);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(74, 200, 232, 0.3);
        }
        
        .shape-icon {
            font-size: 3.2em;
            margin-bottom: 12px;
            display: block;
            font-weight: bold;
        }
        
        .cascada-section {
            background: linear-gradient(135deg, rgba(27, 95, 122, 0.15) 0%, rgba(43, 155, 199, 0.15) 100%);
            backdrop-filter: blur(15px);
            padding: 25px;
            border-radius: 15px;
            margin-top: 25px;
            border: 1px solid rgba(74, 200, 232, 0.3);
            box-shadow: 0 5px 20px rgba(74, 200, 232, 0.1);
        }
        
        .cascada-section select {
            width: 100%;
            padding: 15px 18px;
            border: 2px solid rgba(74, 200, 232, 0.3);
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            color: #1B5F7A;
            font-size: 1.1em;
            font-weight: 600;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
        }
        
        .cascada-section select:focus {
            outline: none;
            border-color: #4AC8E8;
            box-shadow: 0 0 0 4px rgba(74, 200, 232, 0.15);
            transform: translateY(-2px);
            background: rgba(255, 255, 255, 0.95);
        }
        
        .cascada-section select:hover {
            border-color: #2B9BC7;
            background: rgba(255, 255, 255, 0.95);
            transform: translateY(-1px);
        }
        
        .cascada-section label {
            color: #1B5F7A !important;
            text-shadow: 0 1px 2px rgba(255,255,255,0.5);
        }
        
        .results-card {
            background: linear-gradient(135deg, #4AC8E8 0%, #2B9BC7 100%);
            color: white;
            padding: 30px;
            border-radius: 20px;
            margin-bottom: 25px;
            position: relative;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(74, 200, 232, 0.3);
        }
        
        .results-card::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            pointer-events: none;
        }
        
        .results-card h3 {
            font-size: 1.6em;
            margin-bottom: 25px;
            text-align: center;
            position: relative;
            z-index: 2;
            font-weight: 700;
        }
        
        .spec-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            position: relative;
            z-index: 2;
        }
        
        .spec-item {
            background: rgba(255,255,255,0.15);
            backdrop-filter: blur(10px);
            padding: 20px 15px;
            border-radius: 15px;
            text-align: center;
            border: 1px solid rgba(255,255,255,0.2);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }
        
        .spec-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
            transition: left 0.8s;
        }
        
        .spec-item:hover {
            transform: translateY(-8px) scale(1.02);
            background: rgba(255,255,255,0.25);
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .spec-item:hover::before {
            left: 100%;
        }
        
        .spec-value {
            font-size: 2em;
            font-weight: 800;
            margin-bottom: 8px;
            color: white;
        }
        
        .spec-label {
            font-size: 0.9em;
            opacity: 0.9;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .bomba-card {
            background: linear-gradient(135deg, #34495e 0%, #2c3e50 100%);
            color: white;
            padding: 25px;
            border-radius: 20px;
            margin-bottom: 25px;
            border: 2px solid #4AC8E8;
            position: relative;
            overflow: hidden;
        }
        
        .bomba-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="10" cy="10" r="2" fill="white" opacity="0.05"/><circle cx="90" cy="90" r="2" fill="white" opacity="0.05"/><circle cx="50" cy="25" r="1.5" fill="white" opacity="0.05"/><circle cx="25" cy="75" r="1.5" fill="white" opacity="0.05"/><circle cx="75" cy="50" r="1" fill="white" opacity="0.05"/></svg>');
            pointer-events: none;
        }
        
        .bomba-info {
            position: relative;
            z-index: 2;
        }
        
        .aseglass-card {
            background: linear-gradient(135deg, #1B5F7A 0%, #2B9BC7 100%);
            color: white;
            padding: 25px;
            border-radius: 20px;
            margin-bottom: 25px;
            border: 2px solid #4AC8E8;
            position: relative;
            overflow: hidden;
        }
        
        .aseglass-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="10" cy="10" r="2" fill="white" opacity="0.05"/><circle cx="90" cy="90" r="2" fill="white" opacity="0.05"/><circle cx="50" cy="25" r="1.5" fill="white" opacity="0.05"/><circle cx="25" cy="75" r="1.5" fill="white" opacity="0.05"/><circle cx="75" cy="50" r="1" fill="white" opacity="0.05"/></svg>');
            pointer-events: none;
        }
        
        .aseglass-info {
            position: relative;
            z-index: 2;
        }
        
        .cascada-results {
            background: linear-gradient(135deg, #2B9BC7 0%, #1B5F7A 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin-top: 25px;
            border: 1px solid #4AC8E8;
        }
        
        .warning {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a52 100%);
            color: white;
            padding: 18px;
            border-radius: 12px;
            margin-top: 15px;
            text-align: center;
            font-weight: 600;
            box-shadow: 0 5px 15px rgba(255, 107, 107, 0.3);
        }
        
        .success {
            background: linear-gradient(135deg, #51cf66 0%, #40c057 100%);
            color: white;
            padding: 18px;
            border-radius: 12px;
            margin-top: 15px;
            text-align: center;
            font-weight: 600;
            box-shadow: 0 5px 15px rgba(81, 207, 102, 0.3);
        }
        
        .tech-card {
            background: linear-gradient(135deg, rgba(27, 95, 122, 0.05) 0%, rgba(43, 155, 199, 0.05) 100%);
            border: 1px solid rgba(74, 200, 232, 0.2);
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 20px;
        }
        
        .tech-card h3 {
            color: #1B5F7A;
            font-size: 1.4em;
            margin-bottom: 20px;
            font-weight: 700;
        }
        
        .tech-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }
        
        .tech-item {
            background: white;
            padding: 18px;
            border-radius: 12px;
            text-align: center;
            border: 1px solid rgba(74, 200, 232, 0.15);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }
        
        .tech-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(74, 200, 232, 0.1), transparent);
            transition: left 0.8s;
        }
        
        .tech-item:hover {
            border-color: #4AC8E8;
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 8px 25px rgba(74, 200, 232, 0.2);
        }
        
        .tech-item:hover::before {
            left: 100%;
        }
        
        .tech-value {
            font-size: 1.6em;
            font-weight: 700;
            color: #2B9BC7;
            margin-bottom: 5px;
        }
        
        .tech-label {
            font-size: 0.9em;
            color: #1B5F7A;
            font-weight: 500;
        }
        
        @media (max-width: 1200px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .input-section {
                border-right: none;
                border-bottom: 1px solid rgba(74, 200, 232, 0.2);
            }
            
            .input-section::before {
                display: none;
            }
        }
        
        @media (max-width: 768px) {
            .spec-grid {
                grid-template-columns: 1fr 1fr;
            }
            
            .tech-grid {
                grid-template-columns: 1fr;
            }
            
            .shape-selector {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2.2em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Calculadora Profesional de Piscinas</h1>
            <p>Sistema de Dimensionamiento con Filtraci√≥n Aseglass y Datos T√©cnicos de Bombas</p>
        </div>
        
        <div class="main-content">
            <div class="input-section">
                <div class="form-group">
                    <label>üè† Tipo de Piscina</label>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 15px;">
                        <button class="tipo-btn active" data-tipo="residencial" style="padding: 18px 20px; border: 2px solid rgba(74, 200, 232, 0.4); border-radius: 12px; background: rgba(74, 200, 232, 0.25); color: #1B5F7A; font-weight: 700; cursor: pointer; transition: all 0.3s; font-size: 1.1em;">
                            üè† Residencial
                        </button>
                        <button class="tipo-btn" data-tipo="comercial" style="padding: 18px 20px; border: 2px solid rgba(74, 200, 232, 0.3); border-radius: 12px; background: white; color: #1B5F7A; font-weight: 700; cursor: pointer; transition: all 0.3s; font-size: 1.1em;">
                            üè¢ Comercial
                        </button>
                    </div>
                    <div style="margin-top: 12px; padding: 12px; background: rgba(74, 200, 232, 0.1); border-radius: 8px; font-size: 0.9em; color: #1B5F7A;">
                        <div id="tipo-info">
                            üè† <strong>Residencial:</strong> Turnover 6-8h, uso familiar est√°ndar, sistemas optimizados para eficiencia.
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Forma de la Piscina</label>
                    <div class="shape-selector">
                        <div class="shape-option active" data-shape="rectangular">
                            <div class="shape-icon">‚¨õ</div>
                            <div>Rectangular</div>
                        </div>
                        <div class="shape-option" data-shape="circular">
                            <div class="shape-icon">‚óè</div>
                            <div>Circular</div>
                        </div>
                        <div class="shape-option" data-shape="ovalada">
                            <div class="shape-icon">‚¨≠</div>
                            <div>Ovalada</div>
                        </div>
                    </div>
                </div>
                
                <div id="dimensiones-rectangular">
                    <div class="form-group">
                        <label>Dimensiones (metros)</label>
                        <div class="input-row">
                            <input type="number" id="largo" placeholder="Largo" step="0.1" min="1">
                            <span style="color: #2B9BC7; font-weight: bold; font-size: 1.2em;">√ó</span>
                            <input type="number" id="ancho" placeholder="Ancho" step="0.1" min="1">
                        </div>
                    </div>
                </div>
                
                <div id="dimensiones-circular" style="display: none;">
                    <div class="form-group">
                        <label>Di√°metro (metros)</label>
                        <input type="number" id="diametro" placeholder="Di√°metro" step="0.1" min="1">
                    </div>
                </div>
                
                <div id="dimensiones-ovalada" style="display: none;">
                    <div class="form-group">
                        <label>Dimensiones (metros)</label>
                        <div class="input-row">
                            <input type="number" id="radio-mayor" placeholder="Radio Mayor" step="0.1" min="1">
                            <span style="color: #2B9BC7; font-weight: bold; font-size: 1.2em;">√ó</span>
                            <input type="number" id="radio-menor" placeholder="Radio Menor" step="0.1" min="1">
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>üåä Profundidad (metros)</label>
                    <div class="input-row">
                        <input type="number" id="prof-min" placeholder="M√≠nima" step="0.1" min="0.5">
                        <span style="color: #2B9BC7; font-weight: bold; font-size: 1.2em;">-</span>
                        <input type="number" id="prof-max" placeholder="M√°xima" step="0.1" min="0.5">
                    </div>
                </div>
                
                <div class="cascada-section">
                    <label style="color: #1B5F7A; font-weight: 700; margin-bottom: 12px; display: block;">üíß Sistema de Cascada</label>
                    <select id="cascada" style="margin-bottom: 20px;">
                        <option value="no">Sin cascada</option>
                        <option value="30">Cascada 30cm</option>
                        <option value="60">Cascada 60cm</option>
                        <option value="90">Cascada 90cm</option>
                    </select>
                    
                    <div id="bomba-cascada-opciones" style="display: none; margin-top: 20px;">
                        <label style="color: #1B5F7A; font-weight: 700; margin-bottom: 15px; display: block;">‚ö° Configuraci√≥n de Bomba</label>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                            <button class="bomba-btn active" data-tipo="independiente" style="padding: 12px 15px; border: 2px solid rgba(74, 200, 232, 0.4); border-radius: 10px; background: rgba(74, 200, 232, 0.15); color: #1B5F7A; font-weight: 600; cursor: pointer; transition: all 0.3s; font-size: 0.9em;">
                                Bomba Independiente
                            </button>
                            <button class="bomba-btn" data-tipo="integrada" style="padding: 12px 15px; border: 2px solid rgba(74, 200, 232, 0.3); border-radius: 10px; background: rgba(255, 255, 255, 0.8); color: #1B5F7A; font-weight: 600; cursor: pointer; transition: all 0.3s; font-size: 0.9em;">
                                Sistema Integrado
                            </button>
                        </div>
                        <div style="margin-top: 12px; padding: 10px; background: rgba(255,255,255,0.6); border-radius: 8px; font-size: 0.85em; color: #1B5F7A;">
                            <div id="bomba-info">
                                üí° <strong>Independiente:</strong> Bomba separada para cascada, sistema principal sin cambios.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="results-section">
                <div class="results-card">
                    <h3>üìä Especificaciones del Sistema</h3>
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px;">
                        <!-- Fila superior -->
                        <div class="spec-item">
                            <div class="spec-value" id="volumen-result">- m¬≥</div>
                            <div class="spec-label">Volumen</div>
                        </div>
                        <div class="spec-item">
                            <div class="spec-value" id="filtro-result">-"</div>
                            <div class="spec-label">Filtro Di√°metro</div>
                        </div>
                        <div class="spec-item">
                            <div class="spec-value" id="bomba-result">- HP</div>
                            <div class="spec-label">Bomba Principal</div>
                        </div>
                        <!-- Fila inferior -->
                        <div class="spec-item">
                            <div class="spec-value" id="inyectores-result">-</div>
                            <div class="spec-label">Inyectores</div>
                        </div>
                        <div class="spec-item">
                            <div class="spec-value" id="skimmers-result">-</div>
                            <div class="spec-label">Skimmers</div>
                        </div>
                        <div class="spec-item">
                            <div class="spec-value" id="caudal-result">- m¬≥/h</div>
                            <div class="spec-label">Caudal Requerido</div>
                        </div>
                    </div>
                </div>
                
                <div class="bomba-card">
                    <div class="bomba-info">
                        <h3 style="margin-bottom: 20px; font-size: 1.6em; text-align: center;">‚ö° Especificaciones de Bomba</h3>
                        
                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin-bottom: 25px;">
                            <div style="background: rgba(255,255,255,0.15); padding: 20px; border-radius: 12px; text-align: center;">
                                <div style="font-size: 2em; font-weight: bold; margin-bottom: 8px; color: #4AC8E8;" id="bomba-modelo">Seleccionar</div>
                                <div style="font-size: 1em; opacity: 0.9; font-weight: 600;">Modelo Recomendado</div>
                            </div>
                            <div style="background: rgba(255,255,255,0.15); padding: 20px; border-radius: 12px; text-align: center;">
                                <div style="font-size: 2em; font-weight: bold; margin-bottom: 8px; color: #4AC8E8;" id="bomba-caudal-real">- m¬≥/h</div>
                                <div style="font-size: 1em; opacity: 0.9; font-weight: 600;">Caudal Real Bomba</div>
                            </div>
                        </div>
                        
                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px;">
                            <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 10px; text-align: center;">
                                <div style="font-size: 1.4em; font-weight: bold; color: #4AC8E8;" id="bomba-amperaje-110">- A</div>
                                <div style="font-size: 0.85em; opacity: 0.8;">110V</div>
                            </div>
                            <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 10px; text-align: center;">
                                <div style="font-size: 1.4em; font-weight: bold; color: #4AC8E8;" id="bomba-amperaje-230">- A</div>
                                <div style="font-size: 0.85em; opacity: 0.8;">230V</div>
                            </div>
                            <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 10px; text-align: center;">
                                <div style="font-size: 1.4em; font-weight: bold; color: #4AC8E8;" id="eficiencia-bomba">-%</div>
                                <div style="font-size: 0.85em; opacity: 0.8;">Eficiencia</div>
                            </div>
                        </div>
                        
                        <div id="bomba-status" style="margin-top: 20px; padding: 15px; background: rgba(255,255,255,0.1); border-radius: 10px; font-size: 0.9em;">
                            üìä Seleccione las dimensiones de la piscina para ver recomendaciones de bomba
                        </div>
                    </div>
                </div>
                
                <div class="aseglass-card">
                    <div class="aseglass-info">
                        <div style="margin-bottom: 25px;">
                            <label style="color: white; font-weight: 700; margin-bottom: 15px; display: block; font-size: 1.1em;">üè≠ Marca de Filtro</label>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                                <button class="marca-btn active" data-marca="panda" style="padding: 15px 20px; border: 2px solid rgba(255,255,255,0.3); border-radius: 12px; background: rgba(255,255,255,0.2); color: white; font-weight: 600; cursor: pointer; transition: all 0.3s; backdrop-filter: blur(10px);">
                                    Panda
                                </button>
                                <button class="marca-btn" data-marca="emaux" style="padding: 15px 20px; border: 2px solid rgba(255,255,255,0.3); border-radius: 12px; background: rgba(255,255,255,0.1); color: white; font-weight: 600; cursor: pointer; transition: all 0.3s; backdrop-filter: blur(10px);">
                                    Emaux
                                </button>
                            </div>
                        </div>
                        
                        <h3 style="margin-bottom: 20px; font-size: 1.6em; text-align: center;">üî¨ Especificaciones Aseglass</h3>
                        
                        <div style="display: grid; grid-template-columns: 1fr; gap: 20px;">
                            <div style="background: rgba(255,255,255,0.15); padding: 25px; border-radius: 12px; text-align: center;">
                                <div style="font-size: 2.5em; font-weight: bold; margin-bottom: 10px; color: #4AC8E8;" id="aseglass-kg">- kg</div>
                                <div style="font-size: 1.1em; opacity: 0.9; font-weight: 600;">Aseglass Requerido</div>
                                <div style="font-size: 0.85em; opacity: 0.7; margin-top: 8px;" id="modelo-filtro">Seg√∫n especificaciones t√©cnicas</div>
                            </div>
                            <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 10px; font-size: 0.9em;">
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; text-align: center;">
                                    <div>
                                        <div style="font-size: 1.3em; font-weight: bold; color: #4AC8E8;" id="volumen-optimo">- m¬≥</div>
                                        <div style="opacity: 0.8;">Volumen √ìptimo 6h</div>
                                    </div>
                                    <div>
                                        <div style="font-size: 1.3em; font-weight: bold; color: #4AC8E8;" id="arena-reemplazada">- kg</div>
                                        <div style="opacity: 0.8;">Arena Reemplazada</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="tech-card">
                    <h3>üîß Especificaciones T√©cnicas</h3>
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px;">
                        <!-- Fila superior -->
                        <div class="tech-item">
                            <div class="tech-value" id="tipo-filtro-result">-</div>
                            <div class="tech-label">Tipo de Filtro</div>
                        </div>
                        <div class="tech-item">
                            <div class="tech-value" id="turnover-result">-</div>
                            <div class="tech-label">Turnover Rate</div>
                        </div>
                        <!-- Fila inferior -->
                        <div class="tech-item">
                            <div class="tech-value" id="tuberia-succion-result">-</div>
                            <div class="tech-label">Tuber√≠a Succi√≥n</div>
                        </div>
                        <div class="tech-item">
                            <div class="tech-value" id="tuberia-retorno-result">-</div>
                            <div class="tech-label">Tuber√≠a Retorno</div>
                        </div>
                    </div>
                </div>
                
                <div class="tech-card">
                    <h3>üíß C√°lculos de Agua y Mantenimiento</h3>
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px;">
                        <!-- Fila superior -->
                        <div class="tech-item">
                            <div class="tech-value" id="agua-1cm">- L</div>
                            <div class="tech-label">1cm Profundidad</div>
                        </div>
                        <div class="tech-item">
                            <div class="tech-value" id="evaporacion-dia">- L/d√≠a</div>
                            <div class="tech-label">Evaporaci√≥n Diaria</div>
                        </div>
                        <!-- Fila inferior -->
                        <div class="tech-item">
                            <div class="tech-value" id="retrolavado">- L</div>
                            <div class="tech-label">Retrolavado</div>
                        </div>
                        <div class="tech-item">
                            <div class="tech-value" id="galones-total">- gal</div>
                            <div class="tech-label">Volumen Total</div>
                        </div>
                    </div>
                </div>
                
                <div id="cascada-info" class="cascada-results" style="display: none;">
                    <h3>üåä Sistema de Cascada</h3>
                    <div style="display: grid; gap: 15px;">
                        <div><strong>Bomba Cascada:</strong> <span id="bomba-cascada">-</span></div>
                        <div><strong>Caudal Adicional:</strong> <span id="caudal-cascada">-</span></div>
                        <div id="cascada-status"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Base de datos de bombas con especificaciones t√©cnicas
        const bombasSilver = [
            { hp: 0.75, caudal: 6.5, amperaje110: 6.2, amperaje230: 3.2, tipo: 'Silver' },
            { hp: 1.0, caudal: 9.0, amperaje110: 7.3, amperaje230: 3.8, tipo: 'Silver' },
            { hp: 1.2, caudal: 12.4, amperaje110: 8.4, amperaje230: 4.6, tipo: 'Silver' },
            { hp: 1.5, caudal: 14.4, amperaje110: 10.7, amperaje230: 5.8, tipo: 'Silver' }
        ];
        
        const bombasSupra = [
            { hp: 1.5, caudal: 16.0, amperaje110: null, amperaje230: 5.2, tipo: 'Supra' },
            { hp: 2.0, caudal: 23.0, amperaje110: null, amperaje230: 4.0, tipo: 'Supra' },
            { hp: 2.5, caudal: 27.0, amperaje110: null, amperaje230: 8.6, tipo: 'Supra' },
            { hp: 3.0, caudal: 32.0, amperaje110: null, amperaje230: 10.0, tipo: 'Supra' }
        ];

        // Base de datos de especificaciones de filtros
        const especificacionesPANDA = {
            '14': { arena: 27, volumen6h: 40.9, volumen8h: 54.5, modelo: 'FPD14T' },
            '16': { arena: 45, volumen6h: 47.4, volumen8h: 63.2, modelo: 'FPD16T' },
            '18': { arena: 52, volumen6h: 54.0, volumen8h: 72.0, modelo: 'FPD18T' },
            '19': { arena: 79, volumen6h: 54.0, volumen8h: 72.0, modelo: 'FPD19T' },
            '20': { arena: 85, volumen6h: 60.0, volumen8h: 80.0, modelo: 'FPD20T' },
            '22': { arena: 110, volumen6h: 67.8, volumen8h: 90.4, modelo: 'FPD22T' },
            '24': { arena: 136, volumen6h: 67.8, volumen8h: 90.4, modelo: 'FPD24T' },
            '26': { arena: 163, volumen6h: 98.1, volumen8h: 130.8, modelo: 'FPD26T' },
            '28': { arena: 190, volumen6h: 115.0, volumen8h: 153.0, modelo: 'FPD28T' },
            '30': { arena: 210, volumen6h: 133.6, volumen8h: 178.1, modelo: 'FPD30T' },
            '31': { arena: 227, volumen6h: 133.6, volumen8h: 178.1, modelo: 'FPD31T' },
            '32': { arena: 250, volumen6h: 150.0, volumen8h: 200.0, modelo: 'FPD32T' },
            '36': { arena: 320, volumen6h: 180.0, volumen8h: 240.0, modelo: 'FPD36T' }
        };
        
        const especificacionesEMAUX = {
            '14': { arena: 20, volumen6h: 32.0, volumen8h: 43.0, modelo: 'P350 (35cm)' },
            '16': { arena: 35, volumen6h: 46.0, volumen8h: 61.0, modelo: 'P400 (40cm)' },
            '18': { arena: 45, volumen6h: 58.0, volumen8h: 78.0, modelo: 'P450 (45cm)' },
            '20': { arena: 85, volumen6h: 81.0, volumen8h: 108.0, modelo: 'P500 (50cm)' },
            '22': { arena: 110, volumen6h: 95.0, volumen8h: 127.0, modelo: 'P550 (55cm)' },
            '24': { arena: 130, volumen6h: 110.0, volumen8h: 147.0, modelo: 'P600 (60cm)' },
            '26': { arena: 145, volumen6h: 115.0, volumen8h: 153.0, modelo: 'P650 (65cm)' },
            '28': { arena: 210, volumen6h: 143.0, volumen8h: 190.0, modelo: 'P700 (70cm)' },
            '30': { arena: 250, volumen6h: 165.0, volumen8h: 220.0, modelo: 'P750 (75cm)' },
            '32': { arena: 300, volumen6h: 190.0, volumen8h: 253.0, modelo: 'P800 (80cm)' },
            '36': { arena: 400, volumen6h: 240.0, volumen8h: 320.0, modelo: 'P900 (90cm)' }
        };
        
        // Elementos del DOM
        const shapeOptions = document.querySelectorAll('.shape-option');
        const inputs = document.querySelectorAll('input');
        const cascadaSelect = document.getElementById('cascada');
        const marcaBtns = document.querySelectorAll('.marca-btn');
        const bombaBtns = document.querySelectorAll('.bomba-btn');
        const tipoBtns = document.querySelectorAll('.tipo-btn');
        
        // Event listeners
        shapeOptions.forEach(option => {
            option.addEventListener('click', () => {
                document.querySelector('.shape-option.active').classList.remove('active');
                option.classList.add('active');
                mostrarDimensiones(option.dataset.shape);
                calcular();
            });
        });
        
        marcaBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelector('.marca-btn.active').classList.remove('active');
                btn.classList.add('active');
                calcular();
            });
        });
        
        tipoBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelector('.tipo-btn.active').classList.remove('active');
                btn.classList.add('active');
                actualizarInfoTipo();
                calcular();
            });
        });
        
        bombaBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelector('.bomba-btn.active').classList.remove('active');
                btn.classList.add('active');
                actualizarInfoBomba();
                calcular();
            });
        });
        
        inputs.forEach(input => {
            input.addEventListener('input', calcular);
        });
        
        cascadaSelect.addEventListener('change', () => {
            mostrarOpcionesBomba();
            calcular();
        });
        
        function actualizarInfoTipo() {
            const tipoPiscina = document.querySelector('.tipo-btn.active')?.dataset.tipo || 'residencial';
            const infoDiv = document.getElementById('tipo-info');
            
            if (tipoPiscina === 'residencial') {
                infoDiv.innerHTML = 'üè† <strong>Residencial:</strong> Turnover 6-8h, uso familiar est√°ndar, sistemas optimizados para eficiencia.';
            } else {
                infoDiv.innerHTML = 'üè¢ <strong>Comercial:</strong> Turnover 4-6h, uso intensivo, sistemas de alta capacidad y mayor filtraci√≥n.';
            }
        }
        
        function mostrarDimensiones(shape) {
            document.getElementById('dimensiones-rectangular').style.display = 'none';
            document.getElementById('dimensiones-circular').style.display = 'none';
            document.getElementById('dimensiones-ovalada').style.display = 'none';
            
            document.getElementById(`dimensiones-${shape}`).style.display = 'block';
        }
        
        function calcularVolumen() {
            const shape = document.querySelector('.shape-option.active').dataset.shape;
            let volumen = 0;
            
            const profMin = parseFloat(document.getElementById('prof-min').value) || 0;
            const profMax = parseFloat(document.getElementById('prof-max').value) || profMin || 0;
            const profPromedio = profMax > 0 ? (profMin + profMax) / 2 : profMin;
            
            if (profPromedio <= 0) return 0;
            
            switch(shape) {
                case 'rectangular':
                    const largo = parseFloat(document.getElementById('largo').value) || 0;
                    const ancho = parseFloat(document.getElementById('ancho').value) || 0;
                    volumen = largo * ancho * profPromedio;
                    break;
                    
                case 'circular':
                    const diametro = parseFloat(document.getElementById('diametro').value) || 0;
                    const radio = diametro / 2;
                    volumen = 3.14 * radio * radio * profPromedio;
                    break;
                    
                case 'ovalada':
                    const radioMayor = parseFloat(document.getElementById('radio-mayor').value) || 0;
                    const radioMenor = parseFloat(document.getElementById('radio-menor').value) || 0;
                    volumen = 3.14 * radioMayor * radioMenor * profPromedio;
                    break;
            }
            
            return Math.round(volumen * 10) / 10;
        }
        
        function calcularAreaSuperficie() {
            const shape = document.querySelector('.shape-option.active').dataset.shape;
            let area = 0;
            
            switch(shape) {
                case 'rectangular':
                    const largo = parseFloat(document.getElementById('largo').value) || 0;
                    const ancho = parseFloat(document.getElementById('ancho').value) || 0;
                    area = largo * ancho;
                    break;
                    
                case 'circular':
                    const diametro = parseFloat(document.getElementById('diametro').value) || 0;
                    const radio = diametro / 2;
                    area = 3.14 * radio * radio;
                    break;
                    
                case 'ovalada':
                    const radioMayor = parseFloat(document.getElementById('radio-mayor').value) || 0;
                    const radioMenor = parseFloat(document.getElementById('radio-menor').value) || 0;
                    area = 3.14 * radioMayor * radioMenor;
                    break;
            }
            
            return area;
        }
        
        function mostrarOpcionesBomba() {
            const cascadaTama√±o = cascadaSelect.value;
            const opcionesDiv = document.getElementById('bomba-cascada-opciones');
            
            if (cascadaTama√±o !== 'no') {
                opcionesDiv.style.display = 'block';
                actualizarInfoBombaConfig();
            } else {
                opcionesDiv.style.display = 'none';
            }
        }
        
        function actualizarInfoBombaConfig() {
            const tipoBomba = document.querySelector('.bomba-btn.active')?.dataset.tipo || 'independiente';
            const infoDiv = document.getElementById('bomba-info');
            
            if (tipoBomba === 'independiente') {
                infoDiv.innerHTML = 'üí° <strong>Independiente:</strong> Bomba separada para cascada, sistema principal sin cambios.';
            } else {
                infoDiv.innerHTML = '‚ö° <strong>Sistema Integrado:</strong> Una sola bomba para piscina + cascada. Filtro aumenta de tama√±o.';
            }
        }
        
        function seleccionarBomba(caudalRequerido, hpRequerido) {
            // Combinar todas las bombas disponibles
            const todasLasBombas = [...bombasSilver, ...bombasSupra];
            
            // Buscar la bomba m√°s adecuada basada en caudal y HP
            let bombaSeleccionada = null;
            let mejorMatch = Infinity;
            
            for (const bomba of todasLasBombas) {
                // Verificar que la bomba cubra el caudal m√≠nimo requerido
                if (bomba.caudal >= caudalRequerido && bomba.hp >= hpRequerido) {
                    // Calcular qu√© tan cerca est√° del requerimiento (menor diferencia es mejor)
                    const diferencia = (bomba.caudal - caudalRequerido) + (bomba.hp - hpRequerido) * 5;
                    
                    if (diferencia < mejorMatch) {
                        mejorMatch = diferencia;
                        bombaSeleccionada = bomba;
                    }
                }
            }
            
            // Si no encontr√≥ una que cubra exactamente, buscar la m√°s cercana por arriba
            if (!bombaSeleccionada) {
                for (const bomba of todasLasBombas) {
                    if (bomba.caudal >= caudalRequerido * 0.8) { // Permitir 20% menos de caudal
                        const diferencia = Math.abs(bomba.caudal - caudalRequerido) + Math.abs(bomba.hp - hpRequerido) * 3;
                        
                        if (diferencia < mejorMatch) {
                            mejorMatch = diferencia;
                            bombaSeleccionada = bomba;
                        }
                    }
                }
            }
            
            return bombaSeleccionada;
        }
        
        function obtenerEspecificaciones(volumen) {
            let specs;
            
            // Obtener tipo de piscina
            const tipoPiscina = document.querySelector('.tipo-btn.active')?.dataset.tipo || 'residencial';
            
            // Verificar si hay cascada y sistema integrado
            const cascadaTama√±o = cascadaSelect.value;
            const tipoBomba = document.querySelector('.bomba-btn.active')?.dataset.tipo || 'independiente';
            
            // Si hay cascada integrada, ajustar la bomba principal
            let bombaAdicional = 0;
            if (cascadaTama√±o !== 'no' && tipoBomba === 'integrada') {
                if (cascadaTama√±o === '30') bombaAdicional = 0.5;
                else if (cascadaTama√±o === '60') bombaAdicional = 0.5;
                else if (cascadaTama√±o === '90') bombaAdicional = 0.75;
            }
            
            // Aplicar tolerancia del 5% para evitar saltos bruscos
            const tolerancia = 0.95;
            
            // Ajustar especificaciones seg√∫n tipo de piscina
            const factorComercial = tipoPiscina === 'comercial' ? 1.5 : 1.0; // 50% m√°s capacidad para comercial
            const turnoverComercial = tipoPiscina === 'comercial' ? '4-6h' : '6-8h';
            
            if (volumen <= 40 * tolerancia || volumen <= 38) {
                specs = {
                    filtro: tipoPiscina === 'comercial' ? '18"-20"' : '16"-18"',
                    bomba: (0.5 + bombaAdicional) * factorComercial,
                    inyectores: tipoPiscina === 'comercial' ? '4-5' : '3-4',
                    skimmers: tipoPiscina === 'comercial' ? 2 : 1,
                    turnover: turnoverComercial,
                    tipoFiltro: tipoPiscina === 'comercial' ? 'Aseglass Comercial' : 'Aseglass Residencial',
                    velocidadFiltracion: tipoPiscina === 'comercial' ? '25-35 m¬≥/h/m¬≤' : '30-40 m¬≥/h/m¬≤'
                };
            } else if (volumen <= 60 * tolerancia || volumen <= 57) {
                specs = {
                    filtro: tipoPiscina === 'comercial' ? '22"-24"' : '20"-22"',
                    bomba: (0.75 + bombaAdicional) * factorComercial,
                    inyectores: tipoPiscina === 'comercial' ? '5-6' : '4-5',
                    skimmers: tipoPiscina === 'comercial' ? '2-3' : '1-2',
                    turnover: turnoverComercial,
                    tipoFiltro: tipoPiscina === 'comercial' ? 'Aseglass Comercial Plus' : 'Aseglass Est√°ndar',
                    velocidadFiltracion: tipoPiscina === 'comercial' ? '25-35 m¬≥/h/m¬≤' : '30-40 m¬≥/h/m¬≤'
                };
            } else if (volumen <= 80 * tolerancia || volumen <= 76) {
                specs = {
                    filtro: tipoPiscina === 'comercial' ? '26"-28"' : '24"-26"',
                    bomba: (1.0 + bombaAdicional) * factorComercial,
                    inyectores: tipoPiscina === 'comercial' ? '6-8' : '5-6',
                    skimmers: tipoPiscina === 'comercial' ? 3 : 2,
                    turnover: turnoverComercial,
                    tipoFiltro: tipoPiscina === 'comercial' ? 'Aseglass Industrial' : 'Aseglass Premium',
                    velocidadFiltracion: tipoPiscina === 'comercial' ? '25-40 m¬≥/h/m¬≤' : '30-40 m¬≥/h/m¬≤'
                };
            } else if (volumen <= 100 * tolerancia || volumen <= 95) {
                specs = {
                    filtro: tipoPiscina === 'comercial' ? '30"-32"' : '28"-30"',
                    bomba: (1.5 + bombaAdicional) * factorComercial,
                    inyectores: tipoPiscina === 'comercial' ? '8-10' : '6-8',
                    skimmers: tipoPiscina === 'comercial' ? '3-4' : '2-3',
                    turnover: turnoverComercial,
                    tipoFiltro: tipoPiscina === 'comercial' ? 'Aseglass Industrial Plus' : 'Aseglass Comercial',
                    velocidadFiltracion: tipoPiscina === 'comercial' ? '25-50 m¬≥/h/m¬≤' : '30-50 m¬≥/h/m¬≤'
                };
            } else {
                specs = {
                    filtro: tipoPiscina === 'comercial' ? '36"-42"' : '32"-36"',
                    bomba: (2.0 + bombaAdicional) * factorComercial,
                    inyectores: tipoPiscina === 'comercial' ? '10-12' : '8-10',
                    skimmers: tipoPiscina === 'comercial' ? 4 : 3,
                    turnover: turnoverComercial,
                    tipoFiltro: tipoPiscina === 'comercial' ? 'Aseglass Industrial Premium' : 'Aseglass Industrial',
                    velocidadFiltracion: tipoPiscina === 'comercial' ? '30-60 m¬≥/h/m¬≤' : '40-60 m¬≥/h/m¬≤'
                };
            }
            
            // Si la bomba integrada excede ciertos l√≠mites, subir el filtro
            if (cascadaTama√±o !== 'no' && tipoBomba === 'integrada') {
                if (specs.bomba >= 1.25 && specs.filtro.includes('16')) {
                    specs.filtro = tipoPiscina === 'comercial' ? '22"-24"' : '20"-22"';
                } else if (specs.bomba >= 1.5 && specs.filtro.includes('20')) {
                    specs.filtro = tipoPiscina === 'comercial' ? '26"-28"' : '24"-26"';
                } else if (specs.bomba >= 2.0 && specs.filtro.includes('24')) {
                    specs.filtro = tipoPiscina === 'comercial' ? '30"-32"' : '28"-30"';
                } else if (specs.bomba >= 2.75 && specs.filtro.includes('28')) {
                    specs.filtro = tipoPiscina === 'comercial' ? '36"-42"' : '32"-36"';
                }
            }
            
            // Calcular tuber√≠a recomendada
            const tipoTurnover = tipoPiscina === 'comercial' ? 4 : 6; // Horas para c√°lculo base
            const caudal = volumen / tipoTurnover;
            
            if (caudal <= 5) {
                specs.tuberiaSuccion = tipoPiscina === 'comercial' ? '2.5"' : '2"';
                specs.tuberiaRetorno = tipoPiscina === 'comercial' ? '2"-2.5"' : '1.5"-2"';
            } else if (caudal <= 10) {
                specs.tuberiaSuccion = tipoPiscina === 'comercial' ? '3"' : '2.5"';
                specs.tuberiaRetorno = tipoPiscina === 'comercial' ? '2.5"-3"' : '2"-2.5"';
            } else if (caudal <= 15) {
                specs.tuberiaSuccion = tipoPiscina === 'comercial' ? '4"' : '3"';
                specs.tuberiaRetorno = tipoPiscina === 'comercial' ? '3"-4"' : '2.5"-3"';
            } else {
                specs.tuberiaSuccion = tipoPiscina === 'comercial' ? '6"' : '4"';
                specs.tuberiaRetorno = tipoPiscina === 'comercial' ? '4"-6"' : '3"-4"';
            }
            
            return specs;
        }
        
        function calcularAseglass(filtroSize, volumen, marca = 'panda') {
            // Seleccionar especificaciones seg√∫n marca
            const especificacionesFiltros = marca === 'panda' ? especificacionesPANDA : especificacionesEMAUX;
            const marcaNombre = marca === 'panda' ? 'PANDA' : 'EMAUX';
            
            // Extraer di√°metro del rango
            const diametros = filtroSize.match(/(\d+)"-(\d+)"/);
            let diametroPromedio;
            
            if (diametros) {
                const min = parseInt(diametros[1]);
                const max = parseInt(diametros[2]);
                diametroPromedio = Math.round((min + max) / 2);
            } else {
                const single = filtroSize.match(/(\d+)"/);
                if (!single) return { aseglass: 0 };
                diametroPromedio = parseInt(single[1]);
            }
            
            // Buscar especificaci√≥n exacta o la m√°s cercana
            let especificacion = especificacionesFiltros[diametroPromedio.toString()];
            let claveUsada = diametroPromedio.toString();
            
            if (!especificacion) {
                // Buscar el m√°s cercano
                const diametrosDisponibles = Object.keys(especificacionesFiltros).map(Number).sort((a, b) => a - b);
                const cercano = diametrosDisponibles.reduce((prev, curr) => {
                    return Math.abs(curr - diametroPromedio) < Math.abs(prev - diametroPromedio) ? curr : prev;
                });
                claveUsada = cercano.toString();
                especificacion = especificacionesFiltros[claveUsada];
            }
            
            if (!especificacion) return { aseglass: 0 };
            
            // Aseglass = Arena (misma cantidad requerida)
            const aseglassKg = especificacion.arena;
            
            return { 
                aseglass: aseglassKg,
                volumenOptimo6h: especificacion.volumen6h,
                volumenOptimo8h: especificacion.volumen8h,
                modeloFiltro: `${marcaNombre} ${especificacion.modelo}`,
                arenaOriginal: especificacion.arena
            };
        }
        
        function obtenerCascadaInfo(tama√±o) {
            switch(tama√±o) {
                case '30':
                    return {
                        bomba: '0.5 HP (evaluar 40% regla)',
                        caudal: '2-6 m¬≥/h',
                        independiente: false,
                        velocidadMin: '1.9 L/min/cm (57 L/min)',
                        instalacion: 'M√°x. 1.2m altura'
                    };
                case '60':
                    return {
                        bomba: '0.5 HP independiente',
                        caudal: '3-8 m¬≥/h',
                        independiente: true,
                        velocidadMin: '1.9 L/min/cm (114 L/min)',
                        instalacion: 'M√°x. 1.2m altura'
                    };
                case '90':
                    return {
                        bomba: '0.75-1.0 HP independiente',
                        caudal: '5-10 m¬≥/h',
                        independiente: true,
                        velocidadMin: '1.9 L/min/cm (171 L/min)',
                        instalacion: 'M√°x. 1.2m altura'
                    };
                default:
                    return null;
            }
        }
        
        function actualizarInfoBombaDetallada(bombaSeleccionada, caudalRequerido, specs) {
            if (!bombaSeleccionada) {
                document.getElementById('bomba-modelo').textContent = 'No disponible';
                document.getElementById('bomba-caudal-real').textContent = '- m¬≥/h';
                document.getElementById('bomba-amperaje-110').textContent = '- A';
                document.getElementById('bomba-amperaje-230').textContent = '- A';
                document.getElementById('eficiencia-bomba').textContent = '-%';
                document.getElementById('bomba-status').innerHTML = 
                    '<div class="warning">‚ö†Ô∏è No hay bomba disponible que cubra los requerimientos</div>';
                return;
            }
            
            // Actualizar modelo de bomba
            const modelo = `${bombaSeleccionada.hp} HP ${bombaSeleccionada.tipo}`;
            document.getElementById('bomba-modelo').textContent = modelo;
            document.getElementById('bomba-caudal-real').textContent = bombaSeleccionada.caudal + ' m¬≥/h';
            
            // Actualizar amperajes
            document.getElementById('bomba-amperaje-110').textContent = 
                bombaSeleccionada.amperaje110 ? bombaSeleccionada.amperaje110 + ' A' : 'N/A';
            document.getElementById('bomba-amperaje-230').textContent = 
                bombaSeleccionada.amperaje230 ? bombaSeleccionada.amperaje230 + ' A' : 'N/A';
            
            // Calcular eficiencia (caudal real vs requerido)
            const eficiencia = Math.min(100, Math.round((caudalRequerido / bombaSeleccionada.caudal) * 100));
            document.getElementById('eficiencia-bomba').textContent = eficiencia + '%';
            
            // Status de la bomba
            let statusHTML = '';
            if (bombaSeleccionada.caudal >= caudalRequerido) {
                const exceso = ((bombaSeleccionada.caudal - caudalRequerido) / caudalRequerido * 100).toFixed(1);
                statusHTML = `<div class="success">‚úÖ Bomba adecuada - Exceso de caudal: ${exceso}%</div>`;
            } else {
                const deficit = ((caudalRequerido - bombaSeleccionada.caudal) / caudalRequerido * 100).toFixed(1);
                statusHTML = `<div class="warning">‚ö†Ô∏è Bomba insuficiente - D√©ficit: ${deficit}%</div>`;
            }
            
            // Informaci√≥n adicional sobre consumo el√©ctrico
            if (bombaSeleccionada.amperaje230) {
                const potenciaW = bombaSeleccionada.amperaje230 * 230;
                const costoMensual = (potenciaW * 8 * 30 / 1000 * 0.15).toFixed(0); // Estimaci√≥n 8h/d√≠a, $0.15/kWh
                statusHTML += `<div style="margin-top: 10px; font-size: 0.85em; opacity: 0.9;">
                    üí° Consumo estimado: ${potenciaW.toFixed(0)}W - ~${costoMensual}/mes
                </div>`;
            }
            
            document.getElementById('bomba-status').innerHTML = statusHTML;
        }
        
        function calcular() {
            const volumen = calcularVolumen();
            
            if (volumen <= 0) {
                // Limpiar resultados
                limpiarResultados();
                return;
            }
            
            const specs = obtenerEspecificaciones(volumen);
            
            // Calcular caudal seg√∫n tipo de piscina
            const tipoPiscina = document.querySelector('.tipo-btn.active')?.dataset.tipo || 'residencial';
            const horasTurnover = tipoPiscina === 'comercial' ? 4 : 6; // Comercial m√°s r√°pido
            const caudal = Math.round(volumen / horasTurnover * 10) / 10;
            
            // Seleccionar bomba basada en especificaciones t√©cnicas reales
            const bombaSeleccionada = seleccionarBomba(caudal, specs.bomba);
            
            // Actualizar resultados principales
            document.getElementById('volumen-result').textContent = volumen + ' m¬≥';
            document.getElementById('filtro-result').textContent = specs.filtro;
            document.getElementById('bomba-result').textContent = specs.bomba + ' HP';
            document.getElementById('inyectores-result').textContent = specs.inyectores;
            document.getElementById('skimmers-result').textContent = specs.skimmers;
            document.getElementById('caudal-result').textContent = caudal + ' m¬≥/h';
            
            // Actualizar especificaciones t√©cnicas
            document.getElementById('tipo-filtro-result').textContent = specs.tipoFiltro;
            document.getElementById('turnover-result').textContent = specs.turnover;
            document.getElementById('tuberia-succion-result').textContent = specs.tuberiaSuccion;
            document.getElementById('tuberia-retorno-result').textContent = specs.tuberiaRetorno;
            
            // Actualizar informaci√≥n detallada de bomba
            actualizarInfoBombaDetallada(bombaSeleccionada, caudal, specs);
            
            // Calcular Aseglass con datos reales seg√∫n marca seleccionada
            const marcaSeleccionada = document.querySelector('.marca-btn.active').dataset.marca;
            const aseglassData = calcularAseglass(specs.filtro, volumen, marcaSeleccionada);
            document.getElementById('aseglass-kg').textContent = aseglassData.aseglass + ' kg';
            document.getElementById('modelo-filtro').textContent = `${aseglassData.modeloFiltro} - Especificaciones t√©cnicas`;
            document.getElementById('volumen-optimo').textContent = aseglassData.volumenOptimo6h ? aseglassData.volumenOptimo6h.toFixed(1) + ' m¬≥' : '- m¬≥';
            document.getElementById('arena-reemplazada').textContent = aseglassData.arenaOriginal ? aseglassData.arenaOriginal + ' kg' : '- kg';
            
            // Calcular informaci√≥n de agua
            const areaSuperficie = calcularAreaSuperficie();
            const agua1cm = Math.round(areaSuperficie * 10);
            const evaporacionDia = Math.round(areaSuperficie * 5); // 5mm/d√≠a promedio
            const retrolavadoLitros = Math.round(volumen * 0.05 * 1000); // 5% del volumen
            const galones = Math.round(volumen * 264.17);
            
            document.getElementById('agua-1cm').textContent = agua1cm.toLocaleString() + ' L';
            document.getElementById('evaporacion-dia').textContent = evaporacionDia.toLocaleString() + ' L';
            document.getElementById('retrolavado').textContent = retrolavadoLitros.toLocaleString() + ' L';
            document.getElementById('galones-total').textContent = galones.toLocaleString() + ' gal';
            
            // Manejar cascada
            procesarCascada();
        }
        
        function limpiarResultados() {
            document.getElementById('volumen-result').textContent = '- m¬≥';
            document.getElementById('filtro-result').textContent = '-"';
            document.getElementById('bomba-result').textContent = '- HP';
            document.getElementById('inyectores-result').textContent = '-';
            document.getElementById('skimmers-result').textContent = '-';
            document.getElementById('caudal-result').textContent = '- m¬≥/h';
            document.getElementById('tipo-filtro-result').textContent = '-';
            document.getElementById('turnover-result').textContent = '-';
            document.getElementById('tuberia-succion-result').textContent = '-';
            document.getElementById('tuberia-retorno-result').textContent = '-';
            document.getElementById('aseglass-kg').textContent = '- kg';
            document.getElementById('agua-1cm').textContent = '- L';
            document.getElementById('evaporacion-dia').textContent = '- L';
            document.getElementById('retrolavado').textContent = '- L';
            document.getElementById('galones-total').textContent = '- gal';
            document.getElementById('cascada-info').style.display = 'none';
            
            // Limpiar informaci√≥n de bomba
            actualizarInfoBombaDetallada(null, 0, null);
        }
        
        function procesarCascada() {
            const cascadaTama√±o = cascadaSelect.value;
            const tipoBomba = document.querySelector('.bomba-btn.active')?.dataset.tipo || 'independiente';
            
            if (cascadaTama√±o !== 'no') {
                const cascadaInfo = obtenerCascadaInfo(cascadaTama√±o);
                
                if (tipoBomba === 'independiente') {
                    document.getElementById('bomba-cascada').textContent = cascadaInfo.bomba;
                    document.getElementById('caudal-cascada').textContent = cascadaInfo.caudal;
                    
                    const statusDiv = document.getElementById('cascada-status');
                    statusDiv.innerHTML = '<div class="success">‚úÖ Sistema con bomba independiente configurado</div>';
                } else {
                    // Sistema integrado
                    document.getElementById('bomba-cascada').textContent = 'Integrada en bomba principal';
                    document.getElementById('caudal-cascada').textContent = cascadaInfo.caudal;
                    
                    const statusDiv = document.getElementById('cascada-status');
                    statusDiv.innerHTML = '<div class="warning">‚ö° Sistema integrado - Bomba y filtro aumentados</div>';
                }
                
                const statusHTML = `<div style="margin-top: 15px; font-size: 0.9em; background: rgba(255,255,255,0.1); padding: 15px; border-radius: 10px;">
                    <strong>üîß Instalaci√≥n:</strong> ${cascadaInfo.instalacion}<br>
                    <strong>üíß Caudal m√≠nimo:</strong> ${cascadaInfo.velocidadMin}
                </div>`;
                
                document.getElementById('cascada-status').innerHTML += statusHTML;
                document.getElementById('cascada-info').style.display = 'block';
            } else {
                document.getElementById('cascada-info').style.display = 'none';
            }
        }
        
        // Funci√≥n que faltaba
        function actualizarInfoBomba() {
            actualizarInfoBombaConfig();
        }
        
        // Inicializar calculadora
        document.addEventListener('DOMContentLoaded', function() {
            actualizarInfoTipo();
            calcular();
        });
        
        // Calcular inicialmente
        calcular();
    </script>
</body>
</html>
